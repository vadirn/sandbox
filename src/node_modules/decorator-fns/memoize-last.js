import { shallowEqual as shallowEqualArrays } from 'array-fns/shallow-equal';

/**
 * Decorator that prevents running provided function if arguments are the same and returns cached result
 * @param {Function} fn
 */
export function memoizeLast(fn) {
  let cachedArgs;
  let cachedReturn;
  return (...args) => {
    if (!shallowEqualArrays(cachedArgs, args)) {
      cachedReturn = fn(...args);
      cachedArgs = args.slice(0);
    }
    return cachedReturn;
  };
}
